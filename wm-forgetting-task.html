<!DOCTYPE html>
<html>
  <head>
    <title>Forgetting</title>
    <script src="C:/Repositories/forgetting-task/jspsych-6.3.1/jspsych.js"></script>
    <script src="C:/Repositories/forgetting-task/jspsych-6.3.1/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="C:/Repositories/forgetting-task/jspsych-6.3.1/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="C:/Repositories/forgetting-task/jspsych-6.3.1/plugins/jspsych-canvas-keyboard-response.js"></script>
    <script src="C:/Repositories/forgetting-task/jspsych-6.3.1/plugins/jspsych-psychophysics.js"></script>
    <link href="C:/Repositories/forgetting-task/jspsych-6.3.1/css/jspsych.css" rel="stylesheet" type="text/css">
  <style>
  </style>
  </head>
  <body></body>
  <script>
  
  // create timeline
  var timeline = [];
  
  
  // number of trials; should be multiple of 4
  var n_trials = 40


    // Set of all 26 letters
  var full_stimulus_set = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];

    
    // Six letters drawn for current trial. No repetitions allowed, and should not have been featured on previous 2 trials
    // TODO: should be turned into a function to prevent repetitions later
  var trial_stimuli = jsPsych.randomization.sampleWithoutReplacement(full_stimulus_set, 6);
  
  var trial_stimuli = [];

  for (var i = 0; i < (n_trials-1); i++) {
    trial_stimuli[i] = jsPsych.randomization.sampleWithoutReplacement(full_stimulus_set, 6);
  }

    
  
  // Fixation cross
  var fixation_cross = {
    obj_type: 'cross',
    line_length: 25,
    startX: 450,
    startY: 275,
    show_start_time: 0,
    show_end_time: 8000
  }
  
  // Six rectangles that surround the stimuli
  var rect_object1 = {
    obj_type: 'rect',
    startX: 300,
    startY: 150,
    width: 100,
    height: 50,
    line_color: '#000000',
    fill_color: '#ffffff',
    show_start_time: 1000,
    show_end_time: 4000
  }
  
    var rect_object2 = {
    obj_type: 'rect',
    startX: 450,
    startY: 150,
    width: 100,
    height: 50,
    line_color: '#000000',
    fill_color: '#ffffff',
    show_start_time: 1000,
    show_end_time: 4000
  }
  
    var rect_object3 = {
    obj_type: 'rect',
    startX: 600,
    startY: 150,
    width: 100,
    height: 50,
    line_color: '#000000',
    fill_color: '#ffffff',
    show_start_time: 1000,
    show_end_time: 4000
  }
  
    var rect_object4 = {
    obj_type: 'rect',
    startX: 300,
    startY: 400,
    width: 100,
    height: 50,
    line_color: '#000000',
    fill_color: '#ffffff',
    show_start_time: 1000,
    show_end_time: 4000
  }
  
    var rect_object5 = {
    obj_type: 'rect',
    startX: 450,
    startY: 400,
    width: 100,
    height: 50,
    line_color: '#000000',
    fill_color: '#ffffff',
    show_start_time: 1000,
    show_end_time: 4000
  }
  
    var rect_object6 = {
    obj_type: 'rect',
    startX: 600,
    startY: 400,
    width: 100,
    height: 50,
    line_color: '#000000',
    fill_color: '#ffffff',
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  // Six Rectangles that serve as forgetting cues (i.e., either the top row or bottom row is red)
  
  var rect_object1_cue = {
    obj_type: 'rect',
    startX: 300,
    startY: 150,
    width: 100,
    height: 50,
    line_color: function() {
      if(jsPsych.timelineVariable('cue') == 'top') {
        return '#FF0000'      
      } else {
        return '#000000'
      }
    },
    fill_color: '#ffffff',
    show_start_time: 5000,
    show_end_time: 7000
  }
  
    var rect_object2_cue = {
    obj_type: 'rect',
    startX: 450,
    startY: 150,
    width: 100,
    height: 50,
    line_color: function() {
      if(jsPsych.timelineVariable('cue') == 'top') {
        return '#FF0000'      
      } else {
        return '#000000'
      }
    },
    fill_color: '#ffffff',
    show_start_time: 5000,
    show_end_time: 7000
  }
  
    var rect_object3_cue = {
    obj_type: 'rect',
    startX: 600,
    startY: 150,
    width: 100,
    height: 50,
    line_color: function() {
      if(jsPsych.timelineVariable('cue') == 'top') {
        return '#FF0000'      
      } else {
        return '#000000'
      }
    },
    fill_color: '#ffffff',
    show_start_time: 5000,
    show_end_time: 7000
  }
  
    var rect_object4_cue = {
    obj_type: 'rect',
    startX: 300,
    startY: 400,
    width: 100,
    height: 50,
    line_color: function() {
      if(jsPsych.timelineVariable('cue') == 'top') {
        return '#000000'      
      } else {
        return '#FF0000'
      }
    },
    fill_color: '#ffffff',
    show_start_time: 5000,
    show_end_time: 7000
  }
  
    var rect_object5_cue = {
    obj_type: 'rect',
    startX: 450,
    startY: 400,
    width: 100,
    height: 50,
    line_color: function() {
      if(jsPsych.timelineVariable('cue') == 'top') {
        return '#000000'      
      } else {
        return '#FF0000'
      }
    },
    fill_color: '#ffffff',
    show_start_time: 5000,
    show_end_time: 7000
  }
  
    var rect_object6_cue = {
    obj_type: 'rect',
    startX: 600,
    startY: 400,
    width: 100,
    height: 50,
    line_color: function() {
      if(jsPsych.timelineVariable('cue') == 'top') {
        return '#000000'      
      } else {
        return '#FF0000'
      }
    },
    fill_color: '#ffffff',
    show_start_time: 5000,
    show_end_time: 7000
  }
  
  // Six stimuli
  var stim_letter1 = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('stim1'),
    startX: 300,
    startY: 150,
    font: "42px Arial",
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  var stim_letter2 = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('stim2'),
    startX: 450,
    startY: 150,
    font: "42px Arial",
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  var stim_letter3 = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('stim3'),
    startX: 600,
    startY: 150,
    font: "42px Arial",
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  var stim_letter4 = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('stim4'),
    startX: 300,
    startY: 400,
    font: "42px Arial",
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  var stim_letter5 = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('stim5'),
    startX: 450,
    startY: 400,
    font: "42px Arial",
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  var stim_letter6 = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('stim6'),
    startX: 600,
    startY: 400,
    font: "42px Arial",
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  
  // Memory probe 
  
  var trial_probe = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('probe_stim'),
    startX: 450,
    startY: 275,
    font: "42px Arial",
    show_start_time: 8000
  }
  
  
  var introduction
    
    
  
  
  var trial = {
    timeline: [
      {
        type: 'psychophysics',
        stimuli: [
          fixation_cross, 
          rect_object1, 
          rect_object2, 
          rect_object3, 
          rect_object4, 
          rect_object5, 
          rect_object6, 
          stim_letter1, 
          stim_letter2, 
          stim_letter3, 
          stim_letter4, 
          stim_letter5, 
          stim_letter6, 
          rect_object1_cue,
          rect_object2_cue,
          rect_object3_cue,
          rect_object4_cue,
          rect_object5_cue,
          rect_object6_cue,
          trial_probe
          ],
          choices: ["z", "/"],
          response_start_time: 8000,
          trial_duration: 13000,
          canvas_width: 1000,
          canvas_height: 800,
          background_color: '#ffffff',
      },
      ],
      timeline_variables: [
        {
          stim1: trial_stimuli[0][0], stim2: trial_stimuli[0][1], stim3: trial_stimuli[0][2], stim4: trial_stimuli[0][3], stim5: trial_stimuli[0][4], stim6: trial_stimuli[0][5], 
          cue: "top", probe: "memory_set", probe_stim: jsPsych.randomization.sampleWithoutReplacement([trial_stimuli[0][3], trial_stimuli[0][4], trial_stimuli[0][5]])[0]
        },
        {
          stim1: trial_stimuli[1][0], stim2: trial_stimuli[1][1], stim3: trial_stimuli[1][2], stim4: trial_stimuli[1][3], stim5: trial_stimuli[1][4], stim6: trial_stimuli[1][5], 
          cue: "top", probe: "forget_set", probe_stim: jsPsych.randomization.sampleWithoutReplacement([trial_stimuli[1][0], trial_stimuli[1][1], trial_stimuli[1][2]])[0]
        },
        {
          stim1: trial_stimuli[2][0], stim2: trial_stimuli[2][1], stim3: trial_stimuli[2][2], stim4: trial_stimuli[2][3], stim5: trial_stimuli[2][4], stim6: trial_stimuli[2][5], 
          cue: "bottom", probe: "memory_set", probe_stim: jsPsych.randomization.sampleWithoutReplacement([trial_stimuli[2][0], trial_stimuli[2][1], trial_stimuli[2][2]])[0]
        }, 
        {
          stim1: trial_stimuli[3][0], stim2: trial_stimuli[3][1], stim3: trial_stimuli[3][2], stim4: trial_stimuli[3][3], stim5: trial_stimuli[3][4], stim6: trial_stimuli[3][5], 
          cue: "bottom", probe: "forget_set", probe_stim: jsPsych.randomization.sampleWithoutReplacement([trial_stimuli[3][3], trial_stimuli[3][4], trial_stimuli[3][5]])[0]
        }
      ],
      repetitions: 1
  }
       

  
/* start the experiment */
    jsPsych.init({
      timeline: [trial]
    });
  </script>
</html>