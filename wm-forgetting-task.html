<!DOCTYPE html>
<html>
  <head>
    <title>Forgetting</title>
    <script src="C:/Repositories/forgetting-task/jspsych-6.3.1/jspsych.js"></script>
    <script src="C:/Repositories/forgetting-task/jspsych-6.3.1/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="C:/Repositories/forgetting-task/jspsych-6.3.1/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="C:/Repositories/forgetting-task/jspsych-6.3.1/plugins/jspsych-canvas-keyboard-response.js"></script>
    <script src="C:/Repositories/forgetting-task/jspsych-6.3.1/plugins/jspsych-psychophysics.js"></script>
    <link href="C:/Repositories/forgetting-task/jspsych-6.3.1/css/jspsych.css" rel="stylesheet" type="text/css">
  <style>
  </style>
  </head>
  <body></body>
  <script>
  
  // create timeline
  var timeline = [];
  
    //------------------------- Letter stimuli
    var letter_a = "A"
    var letter_b = "B"
    var letter_c = "C"
    var letter_d = "D"
    var letter_e = "E"
    var letter_f = "F"
    var letter_g = "G"
    var letter_h = "H"
    var letter_i = "I"
    var letter_j = "J"
    var letter_k = "K"
    var letter_l = "L"
    var letter_m = "M"
    var letter_n = "N"
    var letter_o = "O"
    var letter_p = "P"
    var letter_q = "Q"
    var letter_r = "R"
    var letter_s = "S"
    var letter_t = "T"
    var letter_u = "U"
    var letter_v = "V"
    var letter_w = "W"
    var letter_x = "X"
    var letter_y = "Y"
    var letter_z = "Z"



    // Set of all 26 letters
    var full_stimulus_set = [letter_a,letter_b,letter_c,letter_d,letter_e,letter_f,letter_g,letter_h,letter_i,letter_j,letter_k,letter_l,letter_m       ,letter_n,letter_o,letter_p,letter_q,letter_r,letter_s,letter_t,letter_u,letter_v,letter_w,letter_x,letter_y,letter_z];

    
    // Six letters drawn for current trial. No repetitions allowed, and should not have been featured on previous 2 trials
    // TODO: should be turned into a function to prevent repetitions later
       var trial_stimuli = jsPsych.randomization.sampleWithoutReplacement(full_stimulus_set, 6);

    
  
  // Fixation cross
  var fixation_cross = {
    obj_type: 'cross',
    line_length: 25,
    startX: 450,
    startY: 275,
    show_start_time: 0,
    show_end_time: 8000
  }
  
  // Six rectangles that surround the stimuli
  var rect_object1 = {
    obj_type: 'rect',
    startX: 300,
    startY: 150,
    width: 100,
    height: 50,
    line_color: '#000000',
    fill_color: '#ffffff',
    show_start_time: 1000,
    show_end_time: 4000
  }
  
    var rect_object2 = {
    obj_type: 'rect',
    startX: 450,
    startY: 150,
    width: 100,
    height: 50,
    line_color: '#000000',
    fill_color: '#ffffff',
    show_start_time: 1000,
    show_end_time: 4000
  }
  
    var rect_object3 = {
    obj_type: 'rect',
    startX: 600,
    startY: 150,
    width: 100,
    height: 50,
    line_color: '#000000',
    fill_color: '#ffffff',
    show_start_time: 1000,
    show_end_time: 4000
  }
  
    var rect_object4 = {
    obj_type: 'rect',
    startX: 300,
    startY: 400,
    width: 100,
    height: 50,
    line_color: '#000000',
    fill_color: '#ffffff',
    show_start_time: 1000,
    show_end_time: 4000
  }
  
    var rect_object5 = {
    obj_type: 'rect',
    startX: 450,
    startY: 400,
    width: 100,
    height: 50,
    line_color: '#000000',
    fill_color: '#ffffff',
    show_start_time: 1000,
    show_end_time: 4000
  }
  
    var rect_object6 = {
    obj_type: 'rect',
    startX: 600,
    startY: 400,
    width: 100,
    height: 50,
    line_color: '#000000',
    fill_color: '#ffffff',
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  // Six Rectangles that serve as forgetting cues (i.e., either the top row or bottom row is red)
  
  var rect_object1_cue = {
    obj_type: 'rect',
    startX: 300,
    startY: 150,
    width: 100,
    height: 50,
    line_color: function() {
      if(jsPsych.timelineVariable('cue') == 'top') {
        return '#FF0000'      
      } else {
        return '#000000'
      }
    },
    fill_color: '#ffffff',
    show_start_time: 5000,
    show_end_time: 7000
  }
  
    var rect_object2_cue = {
    obj_type: 'rect',
    startX: 450,
    startY: 150,
    width: 100,
    height: 50,
    line_color: function() {
      if(jsPsych.timelineVariable('cue') == 'top') {
        return '#FF0000'      
      } else {
        return '#000000'
      }
    },
    fill_color: '#ffffff',
    show_start_time: 5000,
    show_end_time: 7000
  }
  
    var rect_object3_cue = {
    obj_type: 'rect',
    startX: 600,
    startY: 150,
    width: 100,
    height: 50,
    line_color: function() {
      if(jsPsych.timelineVariable('cue') == 'top') {
        return '#FF0000'      
      } else {
        return '#000000'
      }
    },
    fill_color: '#ffffff',
    show_start_time: 5000,
    show_end_time: 7000
  }
  
    var rect_object4_cue = {
    obj_type: 'rect',
    startX: 300,
    startY: 400,
    width: 100,
    height: 50,
    line_color: function() {
      if(jsPsych.timelineVariable('cue') == 'top') {
        return '#000000'      
      } else {
        return '#FF0000'
      }
    },
    fill_color: '#ffffff',
    show_start_time: 5000,
    show_end_time: 7000
  }
  
    var rect_object5_cue = {
    obj_type: 'rect',
    startX: 450,
    startY: 400,
    width: 100,
    height: 50,
    line_color: function() {
      if(jsPsych.timelineVariable('cue') == 'top') {
        return '#000000'      
      } else {
        return '#FF0000'
      }
    },
    fill_color: '#ffffff',
    show_start_time: 5000,
    show_end_time: 7000
  }
  
    var rect_object6_cue = {
    obj_type: 'rect',
    startX: 600,
    startY: 400,
    width: 100,
    height: 50,
    line_color: function() {
      if(jsPsych.timelineVariable('cue') == 'top') {
        return '#000000'      
      } else {
        return '#FF0000'
      }
    },
    fill_color: '#ffffff',
    show_start_time: 5000,
    show_end_time: 7000
  }
  
  // Six stimuli
  var stim_letter1 = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('stim1'),
    startX: 300,
    startY: 150,
    font: "42px Arial",
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  var stim_letter2 = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('stim2'),
    startX: 450,
    startY: 150,
    font: "42px Arial",
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  var stim_letter3 = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('stim3'),
    startX: 600,
    startY: 150,
    font: "42px Arial",
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  var stim_letter4 = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('stim4'),
    startX: 300,
    startY: 400,
    font: "42px Arial",
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  var stim_letter5 = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('stim5'),
    startX: 450,
    startY: 400,
    font: "42px Arial",
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  var stim_letter6 = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('stim6'),
    startX: 600,
    startY: 400,
    font: "42px Arial",
    show_start_time: 1000,
    show_end_time: 4000
  }
  
  
  // Memory probe 
  
  var trial_probe = {
    obj_type: 'text',
    content: jsPsych.timelineVariable('probe_stim'),
    startX: 450,
    startY: 275,
    font: "42px Arial",
    show_start_time: 7000
    
  }
    
    
  
  
  var trial = {
    timeline: [
      {
        type: 'psychophysics',
        stimuli: [
          fixation_cross, 
          rect_object1, 
          rect_object2, 
          rect_object3, 
          rect_object4, 
          rect_object5, 
          rect_object6, 
          stim_letter1, 
          stim_letter2, 
          stim_letter3, 
          stim_letter4, 
          stim_letter5, 
          stim_letter6, 
          rect_object1_cue,
          rect_object2_cue,
          rect_object3_cue,
          rect_object4_cue,
          rect_object5_cue,
          rect_object6_cue
          ],
          choices: -1,
          canvas_width: 1000,
          canvas_height: 800,
          background_color: '#ffffff'
      },
      {
        type: 'psychophysics',
        stimuli: [trial_probe],
        choices: ['f', 'j'],
        canvas_width: 1000,
        canvas_height: 800,
        background_color: '#ffffff'
      },
      ],
      timeline_variables: [
        {stim1: trial_stimuli[0], stim2: trial_stimuli[1], stim3: trial_stimuli[2], stim4: trial_stimuli[3], stim5: trial_stimuli[4], stim6: trial_stimuli[5], cue: "top", probe: "memory_set", probe_stim: trial_stimuli[1]}
      ]  
  }
       

  
/* start the experiment */
    jsPsych.init({
      timeline: [trial]
    });
  </script>
</html>